<?xml version="1.0" encoding="utf-8"?>
<test>

<name>NEAR syntax</name>

<config>
indexer
{
	mem_limit		= 16M
}

searchd
{
	<searchd_settings/>
}

source src
{
	type			= mysql
	<sql_settings/>
	sql_query		= SELECT * FROM test_table
}

index idx
{
	source			= src
	path			= <data_path/>/main
    charset_type 	= utf-8
}

</config>

<queries>
	<query index="idx" mode="extended2">"a b" NEAR/2 "c d"</query>
	<query index="idx" mode="extended2">"c d" NEAR/2 "a b"</query>
	<query index="idx" mode="extended2">a b NEAR/2 c d</query>
	<query index="idx" mode="extended2">a NEAR/2 b NEAR/5 c NEAR/2 d</query>
	<query index="idx" mode="extended2">a NEAR/3 b NEAR/3 c NEAR/3 d</query>
	<query index="idx" mode="extended2">a NEAR/3 d NEAR/3 b NEAR/3 c</query>
	<query index="idx" mode="extended2">(a b c) NEAR/3 d</query>
	<query index="idx" mode="extended2">burden NEAR/2 (financial share)</query>
	<query index="idx" mode="extended2">burden NEAR/2 (share financial) </query>
	<query index="idx" mode="extended2">(share financial) NEAR/2 burden</query>
	<query index="idx" mode="extended2">(financial share) NEAR/2 burden</query>
	<query index="idx" mode="extended2">"a b" NEAR/2 "c d" NEAR/2 "f g"</query>
	<query index="idx" mode="extended2">a NEAR/3 b NEAR/3 c NEAR/3 d</query>
	<query index="idx" mode="all" >"ARE NEAR"</query>
	<query index="idx" mode="any" >"ARE NEAR"</query>
	<query index="idx" mode="phrase" >"ARE NEAR"</query>
	<query index="idx" mode="extended" >"ARE NEAR"</query>
	<query index="idx" mode="extended2" >"ARE NEAR"</query>
	<query index="idx" mode="extended2">five NEAR/3 one</query>
	<query index="idx" mode="extended2">six NEAR/3 one</query>
	<query index="idx" mode="extended2">(five|six) NEAR/3 one</query>
</queries>

<db_create>
CREATE TABLE test_table
(
	id INTEGER AUTO_INCREMENT PRIMARY KEY NOT NULL,
	title VARCHAR(4096) NOT NULL
);
</db_create>
<db_insert>
INSERT INTO `test_table` VALUES
( 0, 'a b c d'), (0, 'a x b c d'), (0,'a x x b c d'), ( 0, 'a b x c d'), ( 0, 'a b x x c d'), ( 0, 'a b x x x c d'), ( 0, 'a b x x x x c d'), (0, 'a x b x x x x c x d'), (0, 'a x x b x x x c x x d'),
( 0, 'c d x x x x a b'), ( 0, 'c d x x x a b'), ( 0, 'c d x x a b'), ( 0, 'c d x a b'), ( 0, 'c d a b'),
( 0, '... is the clearinghouse associated with such exchange. In general, clearinghouses are backed by the corporate members of the clearinghouse who are required to share any financial burden resulting from the non-performance by one of their members and, as such, should significantly reduce this credit risk. In cases where the clearinghouse... is the clearinghouse associated with such exchange. In general, clearinghouses are backed by the corporate members of the clearinghouse who are required to share any financial burden resulting from the non-performance by one of their members and, as such, should significantly reduce this credit risk. In cases where the clearinghouse... be able to meet its obligations to a Trading Company. The counterparty for futures contracts traded in the United States and on most foreign exchanges is the clearinghouse associated with such exchange. In general, clearinghouses are backed by the corporate members of the clearinghouse who are required to share any financial...'),
( 0, 'one two three four five six seven eight nine ten eleven twelve thirteen fourteen fifteena' )
</db_insert>
<db_drop>DROP TABLE IF EXISTS test_table</db_drop>

</test>
